/* Shared flashcard styles used in PDF and web preview */
:root {
    --border-radius: 8px; /* Consistent border radius for boxes, images, and headers */
}

.flashcard {
    width: 100%;
    height: 2in; /* Fixed height matching @page size for guaranteed single-page output */
    display: flex;
    flex-direction: column;
    align-items: stretch;
    justify-content: flex-start;
    box-sizing: border-box;
    background: var(--card-bg-color, #f7f7f5);
    color: var(--card-text-color, #333333);
    font-family: "Open Sans", Calibri, Candara, Arial, sans-serif;
    font-size: 9pt;
    line-height: 1.2;
    word-wrap: break-word;
    overflow-wrap: break-word;
    overflow: hidden;
}

.flashcard-header {
    background: var(--card-header-bg-color, #e5e7eb);
    color: var(--card-header-text-color, #111827);
    /* Flush against edges; minimal internal padding */
    padding: 0.04in 0.06in;
    margin-bottom: 0.04in; /* Same gap as header's top/bottom padding */
    font-size: 8pt;
    line-height: 1.2;
    font-weight: 600;
}

.flashcard-body {
    flex: 1 1 0; /* Can shrink to zero to accommodate extra box */
    min-height: 0;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Cut off content that doesn't fit */
}

.flashcard-content {
    box-sizing: border-box;
    width: 100%;
    flex: 1 1 0; /* Can shrink to accommodate extra box */
    min-height: 0;
    overflow: hidden;
    padding: 0.1in;
}

/* Split layout helpers - using CSS Grid for proper sizing */
.flashcard-split {
    display: flex;
    flex: 1 1 0; /* Can shrink to accommodate extra box */
    min-height: 0;
    overflow: hidden; /* Cut off content that doesn't fit */
}

.flashcard-cell {
    display: flex;
    min-height: 0;
    height: 100%;
}

/* Text cell takes remaining space */
.flashcard-cell:has(.flashcard-text-inner) {
    flex: 1 1 0;
}

/* Image cell sizes to content */
.flashcard-cell:has(.flashcard-image-inner) {
    flex: 0 0 auto;
    max-width: 50%;
}

.flashcard-text-inner {
    min-height: 0;
    height: 100%;
    box-sizing: border-box;
    min-width: 0;
    width: 100%;
}
.flashcard-image-inner {
    min-height: 0;
    height: 100%;
    box-sizing: border-box;
}
.flashcard-text-inner {
    padding: 0.1in;
    overflow: hidden;
}
.flashcard-image-inner {
    padding: 0.06in;
    display: flex;
    align-items: center;
    justify-content: flex-end; /* Right align images */
}
.flashcard-image-inner img {
    max-width: 100%;
    height: auto;
    display: block;
}

/* Extra info boxes at bottom of card */
.extra-box {
    box-sizing: border-box;
    margin: 0.06in;
    padding: 0.06in;
    border-radius: var(--border-radius); /* Use consistent border radius */
    border: 1px solid transparent;
    position: relative;
    flex: 0 0 auto;
    overflow: visible;
    break-inside: avoid;
}
.extra-inner { display: block; }
.extra-content { display: block; }
/* Badge overlaps bottom-left border */
.extra-icon-badge {
    position: absolute;
    left: 0;
    bottom: 0;
    transform: translate(-40%, 40%);
    width: 1.4em;
    height: 1.4em;
    border-radius: 9999px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--extra-bg);
    border: 1px solid var(--extra-border);
}
.extra-icon { width: 1em; height: 1em; fill: currentColor; color: var(--extra-border); display: block; }

/* Pastel themes */
.extra-tip { --extra-bg: #fce7f3; --extra-border: #f9a8d4; background: var(--extra-bg); border-color: var(--extra-border); }
.extra-warning { --extra-bg: #fee2e2; --extra-border: #fca5a5; background: var(--extra-bg); border-color: var(--extra-border); }
.extra-check { --extra-bg: #dcfce7; --extra-border: #86efac; background: var(--extra-bg); border-color: var(--extra-border); }
.extra-see_also { --extra-bg: #cffafe; --extra-border: #67e8f9; background: var(--extra-bg); border-color: var(--extra-border); }
.extra-info { --extra-bg: #dbeafe; --extra-border: #93c5fd; background: var(--extra-bg); border-color: var(--extra-border); }

/* Preserve Summernote formatting (apply inside main content and extra boxes) */
.flashcard-content p, .extra-content p { margin: 0.1em 0; }
.flashcard-content ul, .flashcard-content ol,
.extra-content ul, .extra-content ol { margin: 0.2em 0; padding-left: 1em; list-style-position: outside; }
.flashcard-content ul { list-style-type: disc; }
.flashcard-content ul ul { list-style-type: circle; }
.flashcard-content ul ul ul { list-style-type: square; }
.extra-content ul { list-style-type: disc; }
.extra-content ul ul { list-style-type: circle; }
.extra-content ul ul ul { list-style-type: square; }
.flashcard-content ol { list-style-type: decimal; }
.flashcard-content ol ol { list-style-type: lower-alpha; }
.flashcard-content ol ol ol { list-style-type: lower-roman; }
.extra-content ol { list-style-type: decimal; }
.extra-content ol ol { list-style-type: lower-alpha; }
.extra-content ol ol ol { list-style-type: lower-roman; }
.flashcard-content li, .extra-content li { margin: 0.1em 0; }
.flashcard-content strong, .extra-content strong, .flashcard-content b, .extra-content b { font-weight: bold; }
.flashcard-content em, .extra-content em, .flashcard-content i, .extra-content i { font-style: italic; }
.flashcard-content u, .extra-content u { text-decoration: underline; }

/* --- Additional rich text elements: lists, quotes, code, tables, etc. --- */

/* Lists: compact with clear nesting */
.flashcard-content ul,
.flashcard-content ol {
    margin: 0.2em 0;
    padding-left: 1.1em; /* slightly more for clarity */
    list-style-position: outside;
    letter-spacing: normal;
    word-spacing: normal;
    text-align: left;
    font-variant-numeric: proportional-nums lining-nums;
    font-feature-settings: "pnum" 1, "tnum" 0;
}

.flashcard-content ul { list-style-type: disc; }
.flashcard-content ul ul { list-style-type: circle; }
.flashcard-content ul ul ul { list-style-type: square; }

.flashcard-content ol { list-style-type: decimal; }
.flashcard-content ol ol { list-style-type: lower-alpha; }
.flashcard-content ol ol ol { list-style-type: lower-roman; }

.flashcard-content li { margin: 0.1em 0; letter-spacing: normal; word-spacing: normal; }

/* Blockquotes: subtle, print-friendly */
.flashcard-content blockquote, .extra-content blockquote {
    margin: 0.3em 0;
    padding: 0.3em 0.5em;
    border-left: 2px solid rgba(0,0,0,0.2);
    color: #333;
}

/* Inline code */
.flashcard-content code, .extra-content code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    background: rgba(243, 243, 243, 0.85);
    padding: 0.05em 0.25em;
    border-radius: 2px;
    word-break: break-word;
}

/* Preformatted blocks */
.flashcard-content pre, .extra-content pre {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    background: #f3f3f3;
    padding: 0.3em 0.4em;
    margin: 0.3em 0;
    border-radius: 3px;
    white-space: pre-wrap; /* wrap for tiny card size */
    word-break: break-word;
}

/* Images: scale to fit */
.flashcard-content img, .extra-content img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 0.2em 0;
}

/* Horizontal rule */
.flashcard-content hr, .extra-content hr {
    border: none;
    border-top: 1px solid #bbb;
    margin: 0.4em 0;
}

/* Tables: compact and readable */
.flashcard-content table, .extra-content table {
    width: 100%;
    border-collapse: collapse;
    border: 1px solid #bbb;
    font-size: 0.95em;
    table-layout: fixed;
}

.flashcard-content th,
.flashcard-content td,
.extra-content th,
.extra-content td {
    border: 1px solid #bbb;
    padding: 0.25em 0.35em;
    vertical-align: top;
}

.flashcard-content th, .extra-content th {
    background: #efefef;
    font-weight: 600;
}
