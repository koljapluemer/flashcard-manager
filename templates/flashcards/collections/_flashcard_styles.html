/* Shared flashcard styles used in PDF and web preview */
.flashcard {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    justify-content: flex-start;
    box-sizing: border-box;
    background: var(--card-bg-color, #f7f7f5);
    color: var(--card-text-color, #333333);
    /* Unify typography across preview and PDF; prefer stable PDF fonts */
    font-family: "Open Sans", Calibri, Candara, Arial, sans-serif;
    font-size: 9pt;
    line-height: 1.2;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.flashcard-header {
    background: var(--card-header-bg-color, #e5e7eb);
    color: var(--card-header-text-color, #111827);
    /* Flush against edges; minimal internal padding */
    padding: 0.04in 0.06in; 
    font-size: 8pt;
    line-height: 1.2;
    font-weight: 600;
}

.flashcard-content {
    box-sizing: border-box; /* padding stays within width */
    width: 100%;
    /* No fixed height here â€“ let flex allocate remaining space under the header */
    flex: 1 1 auto;
    overflow: auto; /* can be overridden to hidden in PDF */
    padding: 0.1in; /* keep inch to match PDF scaling */
}

/* Split layout helpers (table-based; reliable in WeasyPrint and browsers) */
.flashcard-split { display: table; table-layout: fixed; width: 100%; border-collapse: collapse; flex: 1 1 auto; min-height: 0; }
.flashcard-cell { display: table-cell; vertical-align: top; }
.flashcard-text-inner { box-sizing: border-box; padding: 0.1in; }
.flashcard-image-inner { box-sizing: border-box; padding: 0.06in; text-align: center; }
.flashcard-image-inner img { max-width: 100%; max-height: 100%; object-fit: contain; display: block; margin: 0 auto; }

/* Extra info boxes at bottom of card */
.extra-box { box-sizing: border-box; margin: 0.08in; padding: 0.08in; border-radius: 8px; border: 1px solid transparent; position: relative; }
.extra-inner { display: block; }
.extra-content { display: block; }
/* Badge overlaps bottom-left corner of the box border */
.extra-icon-badge { position: absolute; left: 0; top: 0; transform: translate(-40%, -40%); width: 1.6em; height: 1.6em; border-radius: 9999px; display: flex; align-items: center; justify-content: center; background: var(--extra-bg); border: 1px solid var(--extra-border); }
.extra-icon { width: 1em; height: 1em; fill: currentColor; color: var(--extra-border); display: block; }

/* Pastel themes */
.extra-tip { --extra-bg: #fce7f3; --extra-border: #f9a8d4; background: var(--extra-bg); border-color: var(--extra-border); }
.extra-warning { --extra-bg: #fee2e2; --extra-border: #fca5a5; background: var(--extra-bg); border-color: var(--extra-border); }
.extra-check { --extra-bg: #dcfce7; --extra-border: #86efac; background: var(--extra-bg); border-color: var(--extra-border); }
.extra-see_also { --extra-bg: #cffafe; --extra-border: #67e8f9; background: var(--extra-bg); border-color: var(--extra-border); }
.extra-info { --extra-bg: #dbeafe; --extra-border: #93c5fd; background: var(--extra-bg); border-color: var(--extra-border); }

/* Preserve Summernote formatting (apply inside main content and extra boxes) */
.flashcard-content p, .extra-content p { margin: 0.1em 0; }
.flashcard-content ul, .flashcard-content ol,
.extra-content ul, .extra-content ol { margin: 0.2em 0; padding-left: 1em; list-style-position: outside; }
.flashcard-content ul { list-style-type: disc; }
.flashcard-content ul ul { list-style-type: circle; }
.flashcard-content ul ul ul { list-style-type: square; }
.extra-content ul { list-style-type: disc; }
.extra-content ul ul { list-style-type: circle; }
.extra-content ul ul ul { list-style-type: square; }
.flashcard-content ol { list-style-type: decimal; }
.flashcard-content ol ol { list-style-type: lower-alpha; }
.flashcard-content ol ol ol { list-style-type: lower-roman; }
.extra-content ol { list-style-type: decimal; }
.extra-content ol ol { list-style-type: lower-alpha; }
.extra-content ol ol ol { list-style-type: lower-roman; }
.flashcard-content li, .extra-content li { margin: 0.1em 0; }
.flashcard-content strong, .extra-content strong, .flashcard-content b, .extra-content b { font-weight: bold; }
.flashcard-content em, .extra-content em, .flashcard-content i, .extra-content i { font-style: italic; }
.flashcard-content u, .extra-content u { text-decoration: underline; }

/* Ensure readability at small size */
.flashcard-content h1, .flashcard-content h2, .flashcard-content h3,
.extra-content h1, .extra-content h2, .extra-content h3 {
    font-size: 10pt;
    margin: 0.2em 0;
}

/* --- Additional rich text elements: lists, quotes, code, tables, etc. --- */

/* Lists: compact with clear nesting */
.flashcard-content ul,
.flashcard-content ol {
    margin: 0.2em 0;
    padding-left: 1.1em; /* slightly more for clarity */
    list-style-position: outside;
    letter-spacing: normal;
    word-spacing: normal;
    text-align: left;
    font-variant-numeric: proportional-nums lining-nums;
    font-feature-settings: "pnum" 1, "tnum" 0;
}

.flashcard-content ul { list-style-type: disc; }
.flashcard-content ul ul { list-style-type: circle; }
.flashcard-content ul ul ul { list-style-type: square; }

.flashcard-content ol { list-style-type: decimal; }
.flashcard-content ol ol { list-style-type: lower-alpha; }
.flashcard-content ol ol ol { list-style-type: lower-roman; }

.flashcard-content li { margin: 0.1em 0; letter-spacing: normal; word-spacing: normal; }

/* Blockquotes: subtle, print-friendly */
.flashcard-content blockquote, .extra-content blockquote {
    margin: 0.3em 0;
    padding: 0.3em 0.5em;
    border-left: 2px solid rgba(0,0,0,0.2);
    color: #333;
}

/* Inline code */
.flashcard-content code, .extra-content code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    background: rgba(243, 243, 243, 0.85);
    padding: 0.05em 0.25em;
    border-radius: 2px;
    word-break: break-word;
}

/* Preformatted blocks */
.flashcard-content pre, .extra-content pre {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    background: #f3f3f3;
    padding: 0.3em 0.4em;
    margin: 0.3em 0;
    border-radius: 3px;
    white-space: pre-wrap; /* wrap for tiny card size */
    word-break: break-word;
}

/* Images: scale to fit */
.flashcard-content img, .extra-content img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 0.2em 0;
}

/* Horizontal rule */
.flashcard-content hr, .extra-content hr {
    border: none;
    border-top: 1px solid #bbb;
    margin: 0.4em 0;
}

/* Tables: compact and readable */
.flashcard-content table, .extra-content table {
    width: 100%;
    border-collapse: collapse;
    border: 1px solid #bbb;
    font-size: 0.95em;
    table-layout: fixed;
}

.flashcard-content th,
.flashcard-content td,
.extra-content th,
.extra-content td {
    border: 1px solid #bbb;
    padding: 0.25em 0.35em;
    vertical-align: top;
}

.flashcard-content th, .extra-content th {
    background: #efefef;
    font-weight: 600;
}
