{% extends "base.html" %}

{% block title %}Collections - Flashcard Manager{% endblock %}

{% block content %}
<div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold">Collections</h1>
    <div class="flex gap-2">
        <a href="{% url 'collection_upload_csv' %}" class="btn btn-secondary">Upload CSV</a>
        <a href="{% url 'collection_create' %}" class="btn btn-primary">Create Collection</a>
    </div>
</div>

{% if collections %}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for collection in collections %}
        <div class="card bg-base-200 shadow-xl">
            <div class="card-body">
                <h2 class="card-title">{{ collection.title }}</h2>
                {% if collection.description %}
                    <p class="text-sm opacity-70">{{ collection.description|truncatewords:15 }}</p>
                {% endif %}
                <div class="text-sm opacity-60">
                    {{ collection.flashcards.count }} flashcard{{ collection.flashcards.count|pluralize }}
                </div>
                <div class="card-actions justify-end mt-4">
                    {% if collection.flashcards.exists %}
                        <a href="{% url 'collection_practice' collection.pk %}" class="btn btn-sm btn-primary" target="_blank">Practice</a>
                    {% endif %}
                    <div class="dropdown dropdown-end">
                        <div tabindex="0" role="button" class="btn btn-sm btn-ghost">â‹®</div>
                        <ul tabindex="0" class="dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow">
                            <li><a href="{% url 'collection_detail' collection.pk %}">View</a></li>
                            <li><a href="{% url 'collection_edit' collection.pk %}">Edit</a></li>
                            <li><a href="{% url 'collection_history' collection.pk %}">History</a></li>
                            <li><a href="{% url 'collection_pdf' collection.pk %}">Download PDF</a></li>
                            {% if collection.flashcards.exists %}
                                <li><hr></li>
                                <li><a href="{% url 'collection_practice' collection.pk %}" target="_blank">Practice</a></li>
                            {% endif %}
                            <li><hr></li>
                            <li><a href="{% url 'collection_delete' collection.pk %}" class="text-error">Delete</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
{% else %}
    <div class="text-center py-12">
        <p class="text-lg">No collections yet.</p>
        <a href="{% url 'collection_create' %}" class="btn btn-primary mt-4">Create your first collection</a>
    </div>
{% endif %}
{% endblock %}