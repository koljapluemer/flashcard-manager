{% extends "base.html" %}

{% block title %}Upload CSV - Flashcard Manager{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-3xl font-bold">
            {% if collection %}Upload CSV to {{ collection.title }}{% else %}Upload CSV{% endif %}
        </h1>
        {% if collection %}
            <a href="{% url 'collection_detail' collection.pk %}" class="btn btn-ghost">Back to Collection</a>
        {% endif %}
    </div>

    <div class="bg-base-200 p-6 rounded-lg mb-6">
        <h2 class="text-lg font-semibold mb-3">CSV Format Requirements</h2>
        <ul class="list-disc list-inside space-y-1 text-sm">
            <li>File must have .csv extension</li>
            <li>Exactly 2 columns: front, back</li>
            <li>No header row</li>
            <li>Maximum file size: 5MB</li>
            <li>UTF-8 encoding</li>
        </ul>

        <div class="mt-4">
            <h3 class="font-medium mb-2">Example:</h3>
            <div class="bg-base-100 p-3 rounded font-mono text-xs">
                What is 2+2?,4<br>
                Capital of France,Paris<br>
                Define recursion,A function that calls itself
            </div>
        </div>
    </div>

    <form method="post" enctype="multipart/form-data" class="space-y-6">
        {% csrf_token %}

        <div class="form-control w-full">
            <label class="label">
                <span class="label-text text-lg font-semibold">{{ form.csv_file.label }}</span>
            </label>
            {{ form.csv_file }}
            {% if form.csv_file.help_text %}
                <label class="label">
                    <span class="label-text-alt">{{ form.csv_file.help_text }}</span>
                </label>
            {% endif %}
            {% if form.csv_file.errors %}
                <label class="label">
                    <span class="label-text-alt text-error">{{ form.csv_file.errors.0 }}</span>
                </label>
            {% endif %}
        </div>

        <div class="flex gap-4">
            <button type="submit" class="btn btn-primary">
                {% if collection %}Upload & Add to Collection{% else %}Upload & Create Collection{% endif %}
            </button>
            {% if collection %}
                <a href="{% url 'collection_detail' collection.pk %}" class="btn btn-ghost">Cancel</a>
            {% endif %}
        </div>
    </form>
</div>
{% endblock %}